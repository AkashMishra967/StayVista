<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<style>
    .search-btn {
        background-color: #fe424d;
        color: white;
        border-radius: 25px;
        height: 40px; 
        padding: 0 1.2rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        border: none;
        transition: 0.3s;
        font-weight: 500;
    }

    .search-btn:hover {
        background-color: #d9303a;
        color: white;
    }

    .search-input {
        border-radius: 25px !important;
        height: 40px;
        font-size: 0.9rem;
        border: 1px solid #ddd !important;
    }

    @media (min-width: 992px) {
        .search-container-custom {
            min-width: 400px; 
            max-width: 600px;
            gap: 10px !important;
            margin-left: auto !important;
            margin-right: auto !important;
        }
        .search-input {
            flex: 1;
        }
    }

    @media (max-width: 991px) {
        .search-container-custom {
            flex-wrap: nowrap !important;
            width: 95% !important;
            padding: 0 10px; 
            gap: 10px !important;
            margin: 10px auto !important;
            display: flex !important;
        }
        
        .search-input {
            height: 40px !important;
            font-size: 0.85rem !important;
            flex: 1 !important; 
            min-width: 0; 
            border-radius: 20px !important;
        }

        .search-btn {
            height: 40px !important;
            width: 45px !important;
            padding: 0 !important; 
            flex: 0 0 45px !important;
            border-radius: 50% !important;
            background-color: #fe424d !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
        }

        .search-btn span {
            display: none !important; 
        }

        .search-btn i {
            font-size: 1.1rem !important;
            color: white !important;
        }
    }
</style>

<nav class="navbar navbar-expand-lg bg-white border-bottom sticky-top shadow-sm py-1">
    <div class="container-fluid px-md-4">

        <!-- Logo -->
        <div class="d-flex align-items-center">
            <a class="navbar-brand text-danger" href="/listings">
                <i class="fa-solid fa-compass" style="font-size: 1.8rem;"></i>
            </a>
            <a class="nav-explore d-none d-md-block text-decoration-none"
               href="/listings"
               style="color: #222; font-weight: 500; margin-left: 1rem;">
               Explore
            </a>
        </div>

        <!-- Search -->
        <form class="d-flex align-items-center search-container-custom"
              role="search"
              action="/listings"
              method="GET">

            <select name="country" class="form-select search-input d-none d-lg-block">
                <option value="">Country</option>
                <option value="India">India</option>
                <option value="United Kingdom">United Kingdom</option>
                <option value="Italy">Italy</option>
                <option value="Japan">Japan</option>
                <option value="United States">United States</option>
            </select>

            <input class="form-control search-input"
                   type="search"
                   name="city"
                   placeholder="Search City..." />

            <button class="btn search-btn shadow-sm" type="submit">
                <i class="fa-solid fa-magnifying-glass"></i>
                <span>Search</span>
            </button>
        </form>

        <!-- Toggle -->
        <button class="navbar-toggler" type="button"
                data-bs-toggle="collapse"
                data-bs-target="#navbarNavAltMarkup">
            <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Right Menu -->
        <div class="collapse navbar-collapse flex-grow-0" id="navbarNavAltMarkup">
            <div class="navbar-nav align-items-center ms-auto">

                <!-- Airbnb your home -->
                <% if (currUser) { %>
                    <a class="nav-link fw-bold"
                       href="/listings/new"
                       style="white-space: nowrap;">
                       Airbnb your home
                    </a>
                <% } else { %>
                    <a class="nav-link fw-bold"
                       href="/login"
                       style="white-space: nowrap;">
                       Airbnb your home
                    </a>
                <% } %>

                <!-- Auth Links -->
                <% if (!currUser) { %>
                    <a class="nav-link" href="/signup">Sign up</a>
                    <a class="nav-link" href="/login">Log in</a>
                <% } else { %>
                    <a class="nav-link" href="/logout">Log out</a>
                <% } %>

            </div>
        </div>

    </div>
</nav>
